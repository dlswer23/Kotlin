# 코틀린의 Null값 처리하기



목차

 널 포인터 오류 -> 안전한 null처리 하기 -> 연산자를 이용하여 null처리 하기 -> lateinit  입니다.



어 일단 널이란  어떤한 변수에 값이 들어 있지 않는 것을 말 합니다.그리고 null은 숫자 0 이나 문자 공백이 아니라는 것을 다 알고 계실거라고 생각합니다,

그리고 널 포인터 오류는 이러한 null이 들어있는  변수를 사용할 경우에 나는 오류를 뜻합니다.



 가장 많이 사용하는 null을 해결하기 위하여 사용하는 연산자에 대하여 알려드리겠습니다. 

일단 첫번째로는 ? 연산자 입니다.(예시 코드) type에 ?를 붙임으로서 null이 사용가능한 변수임을 명시적으로 표현하여 줍니다.

그리고 null safe operator 가 있습니다. null safe operator 연산자를 사용하면 앞의 변수가 null이 아닐 경우에만 오픈쪽의 함수가 수행되며 null이면 null을 반환합니다. 



![image-20200927192813453](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20200927192813453.png)

이런식으로 

`if (s != null) s.toUpperCase() else nul`l  이렇게 긴 문장을 ?.로 표현이 가능합니다.

여기서 왼쪽형이 null이면 바로 null을 반환하므로 꼭 중요합니다, 





그리고 Elvis operator 가 있습니다. 코드를 작성하다보면 defalut 값을 주고 싶은 경우가 생기는데 이럴때는 Elvis operator를 사용합니다. 

![image-20200927193318236](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20200927193318236.png)

위 코드는 if (str != null) str else "Unknown" 과 같은 코드 입니다.

엘비스 연산자는 우항으로 return이나 throw도 넣을 수 있습니다.

따라서 간결한 코드로 원하는 형태의 null 처리가 가능 합니다.



다음으로는 안전하게 자료형 변환을 도와주는 as? 연산자 입니다. 만약 지원되지 않는 자료형으로 변환을 시도하는 경우에는 예외가 발생하게 되는데 이럴때 as?연산자를 사용할 수 있습니다.

![image-20201003202239353](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20201003202239353.png)



예시로는 이 코드를 볼 수 있는데 자바에서 자료형변환을 try-catch블럭으로 감싸는 방법과 달리 코틀린은 as? 하나면 간편하게 해결할 수 있습니다.

as? 연산자는 자료형 변환을 실패할 경우 예외를 방생기키는 대신에 널 값을 반환하여 줍니다 변환되는 값으로 변환된 결과도 바로 알 수 있습니다.

위에 코드를 안전하게 바꾸면 이렇게 되는데 널 값을 반환할 수 있으므로 변환값을 받는 자료형 또한 널을 허용하도록 변경해야합니다.



마지막으로 lateinit 키워드 입니다.

클래스의 프로퍼티는 클래스를 생성할 때 생성자와 함께 값을 할당하는 경우도 많은데 의존성 주입으 사용하거나 설계상 이유로 클래스를 생성한 후 나중에 따로 초기화를 수행하는 경우도 있습니다.

코틀린은 널 값을 허용하지 않는 경우에 초기화를 해주거나 생성자를 통하여 값을 초기화 하도록 강제 하고 있는데 이 lateinit 키워드를 사용한다면 초기화 없이 변수만 선언할 수 있습니다.


